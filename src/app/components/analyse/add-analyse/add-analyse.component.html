<div class="container-fluid mt-n10">
  <div class="card mb-4">
    <div class="card-header">Ajouter une Analyse</div>
    <div class="card-body">
      <div class="row">
        <div class="col-sm-12">
          <form [formGroup]="analyseForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
              <label for="nomAnalyse">Nom de l'analyse :</label>
              <input type="text" formControlName="nomAnalyse" id="nomAnalyse" class="form-control" required>
            </div>
            <!-- <div *ngIf="nameError" class="text-danger">{{ nameError }}</div> -->
            <div class="form-group">
              <label for="typeAnalyse">Type de l'Analyse :</label>
              <div class="d-flex row ml-1">
                <input type="text" formControlName="typeAnalyse" id="typeAnalyse" class="form-control col-8" required>
                <!-- TODO ajouter le button add pour ajouter d'autre type d'analyse -->
                <button class="btn btn-light ml-1" type="button" data-toggle="modal" data-target="#exampleModalLg">
                  Ajouter des tests
                </button>
                <button class="btn btn-dark ml-1" type="button" (click)="addTypeAnalyse()">
                  Submit type Analyse
                </button>
              </div>
            </div>
            <!-- Modal -->
            <div class="modal fade" id="exampleModalLg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
                 aria-hidden="true">
              <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">Ajouter des tests</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close"><span
                      aria-hidden="true">×</span></button>
                  </div>
                  <div class="modal-body">
                    <!-- Ajouter le formulaire pour remplir le test -->

                    <div class="form-row">
                      <div class="col-md-6 mb-3">
                        <label for="nom">Nom</label>
                        <input type="text" formControlName="nomTest" class="form-control" id="nom" placeholder="Nom"
                               required>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="unit">Unité</label>
                        <input type="text" formControlName="uniteTest" class="form-control" id="unit"
                               placeholder="Unité" required>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="col-md-6 mb-3">
                        <label for="minValue">Valeur Minimale</label>
                        <input type="number" formControlName="valeurMin" class="form-control" id="minValue"
                               placeholder="Valeur Minimale" required>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="maxValue">Valeur Maximale</label>
                        <input type="number" formControlName="valeurMax" class="form-control" id="maxValue"
                               placeholder="Valeur Maximale" required>
                      </div>
                    </div>
                    <button class="btn btn-light my-3" type="button" (click)="addTest()">
                      <i class="fas fa-plus"></i>
                    </button>
                    <ul *ngFor="let test of tests">
                      <li>{{ test.nom }}</li>

                    </ul>


                  </div>
                  <div class="modal-footer">
                    <button class="btn btn-primary" type="button" data-dismiss="modal">Done</button>
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="showTestList">
              <ul *ngFor="let typeAnalyse of typeAnalyses">
                <li>{{ typeAnalyse.nomTypeAnalyse }}</li>
                <li>
                  <ul *ngFor="let test of typeAnalyse.tests">
                    <li>{{ test.nom }}</li>
                  </ul>
                </li>
              </ul>
            </div>
            <button type="submit" class="btn btn-primary">Envoyer</button>
          </form>

        </div>
      </div>
    </div>
  </div>
</div>
